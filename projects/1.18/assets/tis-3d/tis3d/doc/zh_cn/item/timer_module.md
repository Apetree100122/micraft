# 定时器模块
![寄，到点啦](item:tis3d:timer_module)

定时器模块使用高精度的石英钟来提供持续而可靠的延时操作。它的硬件运行在20Hz的时钟源上，意味着一个定时器步长刚好消耗50ms。定时器被配置为使用这个时钟周期。

定时器模块持续从它的全部四个端口读取数值。当读取到一个值以后，内部定时器状态就会被设定为这个值，并且每个时钟周期都会减1，直到为0。一旦减少到0，定时器模块就会持续向所有四个端口写一个固定的，特定于实现的值。

定时器模块只有在定时器达到设定时间以后才会向它的端口写值，因此通过设定定时器并尝试读取它，可以实现延时等待一段特定时长。因为TIS-3D计算机I/O的阻塞 特性，这会在定时器达到设定时间之前停止程序执行。

通过让[执行模块](execution_module.md) 使用虚拟的`ANY`端口读取定时器，可以实现中断功能，这种情况下也允许并行的程序通过将值推送到该[执行模块](execution_module.md)来结束读取。

## 时间转换表
为简单起见，我们提供了一个将常用的时长转化为定时器需要设定的值的查找表。

0.5s：10
1s：20
5s：100
10s：200
1min：1200
15min：18000
0.5h：36000

最大的定时器设定值受限制于TIS-3D计算机端口的带宽 ，也就是16位。因此，最大时间设定值是0xFFFF，效果是等待54分钟36秒750毫秒。
